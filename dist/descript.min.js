/*! descript 0.0.1 (https://github.com/mobify/descript) */
!function(a){if("function"==typeof define&&define.amd)define(["$"],a);else{var b=window.Zepto||window.jQuery;a(b)}}(function(a){var b="default",c={src:function(a,b){return a.attr("x-src")&&a.is('[x-src*="'+b+'"]')},contains:function(a,b){return!a.attr("x-src")&&a.html().indexOf(b)>=0}},d=function(a){return!!a},e=function(b){return a(b).map(function(){return this})},f=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d)},g=function(){return g.prototype._instance?g.prototype._instance:(g.prototype._instance=this,this._containers={},this._containers[b]=a('script[x-src], script[type="text/mobify-script"]').remove(),void(this.searchers=c))};return g.init=function(){return g.prototype._instance||new g},g.prototype.add=function(a,b){var c=this.get(a)||[];return this._process(b,function(a,b){c[a]=b[0]}),this._containers[a]=e(c.filter(d)),this},g.prototype.remove=function(a){return this._process(a),this},g.prototype.injectScript=function(b,c,d,f){var g=this.get(c).toArray(),h=function(){return a("<script />").attr("type","text/mobify-script").html("("+f.toString()+")();")[0]},i=this._find(c,d);i&&(g.splice(i.index+1,0,h()),this._containers[c]=e(g))},g.prototype.get=function(a){return a?this._containers[a]:this._containers},g.prototype.replace=function(a,b,c,d){var e=(this.get(a).toArray(),this._find(a,b));if(e){var f=[];4===arguments.length?f.push({pattern:c,replacement:d}):f=c;for(var g=0,h=f.length;h>g;g++){var i=f[g];e.$script.html(e.$script.html().replace(i.pattern,i.replacement))}}},g.prototype.addSearcher=function(a,b){this.searchers[a]=b},g.prototype._process=function(c,d){var g=this.get(b).toArray();for(var h in c)if(c.hasOwnProperty(h))for(var i=c[h].reverse(),j=this.searchers[h],k=i.length;k--;)for(var l=g.length;l--;){var m=a(g[l]);j(m,i[k])&&(d&&d(l,m),f(g,l))}this._containers[b]=e(g)},g.prototype._find=function(b,c){for(var d=this.get(b).toArray(),e=Object.keys(c)[0],f=this.searchers[e],g=d.length;g--;){var h=a(d[g]);if(f(h,c[e]))return{$script:h,index:g}}},g});