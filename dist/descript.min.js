/*! descript 0.0.1 (https://github.com/mobify/descript) */
!function(a){if("function"==typeof define&&define.amd)define(["$"],a);else{var b=window.Zepto||window.jQuery;a(b)}}(function(a){var b="default",c=function(a){return!!a},d=function(b){return a(b).map(function(){return this})},e=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d)},f=function(){return f.prototype._instance?f.prototype._instance:(f.prototype._instance=this,this._containers={},this._containers[b]=a('script[x-src], script[type="text/mobify-script"]').remove(),void(this.searchers={src:function(a,b){return a.attr("x-src")&&a.is('[x-src*="'+b+'"]')},contains:function(a,b){return!a.attr("x-src")&&a.html().indexOf(b)>=0}}))};return f.init=function(){return f.prototype._instance||(f.prototype._instance=new f)},f.prototype._process=function(c,f){var g=this.get(b).toArray();for(var h in c)if(c.hasOwnProperty(h))for(var i=c[h].reverse(),j=this.searchers[h],k=i.length;k--;)for(var l=g.length;l--;){var m=a(g[l]);j(m,i[k])&&(f&&f(l,m),e(g,l))}this._containers[b]=d(g)},f.prototype._find=function(b,c){for(var d=Object.keys(c)[0],e=this.searchers[d],f=b.length;f--;){var g=a(b[f]);if(e(g,c[d]))return{$script:g,index:f}}},f.prototype.add=function(a,b){var e=this.get(a)||[];return this._process(b,function(a,b){e[a]=b[0]}),this._containers[a]=d(e.filter(c)),this},f.prototype.remove=function(a){return this._process(a),this},f.prototype.injectScript=function(b,c,e,f){var g=this.get(c).toArray(),h=function(){return a("<script />").attr("type","text/mobify-script").html("("+f.toString()+")();")[0]},i=this._find(g,e);i&&(g.splice(i.index+1,0,h()),this._containers[c]=d(g))},f.prototype.get=function(a){return a?this._containers[a]:this._containers},f.prototype.replace=function(a,b,c,d){var e=this.get(a).toArray(),f=this._find(e,b);if(f){var g=[];4===arguments.length?g.push({pattern:c,replacement:d}):g=c;for(var h=0,i=g.length;i>h;h++){var j=g[h];f.$script.html(f.$script.html().replace(j.pattern,j.replacement))}}},f.prototype.addSearcher=function(a,b){this.searchers[a]=b},f});