/*! descript 0.0.1 (https://github.com/mobify/descript) */
!function(a){if("function"==typeof define&&define.amd)define(["$"],a);else{var b=window.Zepto||window.jQuery;a(b)}}(function(a){var b="default",c=function(a){return!!a},d=function(b){return a(b).map(function(){return this})},e={src:function(a,b){return a.attr("x-src")&&a.is('[x-src*="'+b+'"]')},contains:function(a,b){return!a.attr("x-src")&&a.html().indexOf(b)>=0}},f=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d)},g=function(){return g.prototype._instance?g.prototype._instance:(g.prototype._instance=this,this._containers={},void(this._containers[b]=a('script[x-src], script[type="text/mobify-script"]').remove()))};return g.init=function(){return g.prototype._instance||(g.prototype._instance=new g)},g.prototype._process=function(c,g){var h=this.get(b).toArray();for(var i in c)if(c.hasOwnProperty(i))for(var j=c[i].reverse(),k=e[i],l=j.length;l--;)for(var m=h.length;m--;){var n=a(h[m]);k(n,j[l])&&(g&&g(m,n),f(h,m))}this._containers[b]=d(h)},g.prototype._find=function(b,c){for(var d=Object.keys(c)[0],f=e[d],g=b.length;g--;){var h=a(b[g]);if(f(h,c[d]))return{$script:h,index:g}}},g.prototype.add=function(a,b){var e=this.get(a)||[];return this._process(b,function(a,b){e[a]=b[0]}),this._containers[a]=d(e.filter(c)),this},g.prototype.remove=function(a){return this._process(a),this},g.prototype.injectScript=function(b,c,e,f){var g=this.get(c).toArray(),h=function(){return a("<script />").attr("type","text/mobify-script").html("("+f.toString()+")();")[0]},i=this._find(g,e);i&&(g.splice(i.index+1,0,h()),this._containers[c]=d(g))},g.prototype.get=function(a){return a?this._containers[a]:this._containers},g.prototype.replace=function(a,b,c,d){var e=this.get(a).toArray(),f=this._find(e,b);if(f){var g=[];4===arguments.length?g.push({pattern:c,replacement:d}):g=c;for(var h=0,i=g.length;i>h;h++){var j=g[h];f.$script.html(f.$script.html().replace(j.pattern,j.replacement))}}},g});