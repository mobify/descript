/*! descript 0.0.1 (https://github.com/mobify/descript) */
!function(a){if("function"==typeof define&&define.amd)define(["$"],a);else{var b=window.Zepto||window.jQuery;a(b)}}(function(a){var b="default",c={src:function(a,b){return a.attr("x-src")&&a.is('[x-src*="'+b+'"]')},contains:function(a,b){return!a.attr("x-src")&&a.html().indexOf(b)>=0}},d=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d)},e=function(){return e.prototype._instance?e.prototype._instance:(e.prototype._instance=this,this._scripts=a('script[x-src], script[type="text/mobify-script"]').remove().map(function(c,d){var e=a(d);return{container:b,$script:e}}).get(),void(this.searchers=c))};return e.init=function(){return e.prototype._instance||new e},e.prototype.add=function(a,b){return this._process(b,function(b,c){c.container=a}),this},e.prototype.remove=function(a){var b=this._scripts;return this._process(a,function(a){d(b,a)}),this},e.prototype.injectScript=function(b,c){var d=function(){return a("<script />").attr("type","text/mobify-script").html("("+c.toString()+")();")[0]},e=this._find(b);e&&this._scripts.splice(e.index+1,0,{container:e.container,$script:d()})},e.prototype.get=function(b){var c=this;return this._containers||(this._containers={},this._scripts.map(function(b){var d=b.container,e=c._containers[d]||a();c._containers[d]=e.add(b.$script)})),b?this._containers[b]:this._containers},e.prototype.replace=function(a,b,c){var d=this._find(a).script;if(d){var e=[];4===arguments.length?e.push({pattern:b,replacement:c}):e=b;for(var f=0,g=e.length;g>f;f++){var h=e[f];d.$script.html(d.$script.html().replace(h.pattern,h.replacement))}}},e.prototype.addSearcher=function(a,b){this.searchers[a]=b},e.prototype._process=function(b,c){var d=this._scripts;for(var e in b)if(b.hasOwnProperty(e))for(var f=b[e].reverse(),g=this.searchers[e],h=f.length;h--;)for(var i=d.length;i--;){var j=d[i];g(a(j.$script),f[h])&&c&&c(i,j)}},e.prototype._find=function(b){for(var c=this._scripts,d=Object.keys(b)[0],e=this.searchers[d],f=c.length;f--;){var g=c[f];if(e(a(g.$script),b[d]))return{script:g,index:f}}},e});