/*! descript 0.0.1 (https://github.com/mobify/descript) */
!function(a){if("function"==typeof define&&define.amd)define(["$"],a);else{var b=window.Zepto||window.jQuery;a(b)}}(function(a){var b="default",c={src:function(a,b){return a.attr("x-src")&&a.is('[x-src*="'+b+'"]')},contains:function(a,b){return!a.attr("x-src")&&a.text().indexOf(b)>=0},regex:function(a,b){var c=a.attr("x-src");return c&&"[object RegExp]"===Object.prototype.toString.call(b)&&b.test(c)}},d=function(a,b){var c=a.slice(b+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,c)},e=function(){return e.prototype._instance?e.prototype._instance:(e.prototype._instance=this,this._scripts=a('script[x-src], script[type="text/mobify-script"]').remove().map(function(c,d){var e=a(d);return{container:b,$script:e}}).get(),void(this.searchers=c))};return e.init=function(){return e.prototype._instance||new e},e.prototype.get=function(a){if(!a)throw new Error("You must specify a script container");var b=this.getAll()[a];if(!b)throw new Error("The "+a+" script container is empty");return b},e.prototype.getAll=function(){var b=this;return this._containers||(this._containers={},this._scripts.map(function(c){var d=c.container,e=b._containers[d]||a();b._containers[d]=e.add(c.$script)})),this._containers},e.prototype.add=function(a,b){return this._each(b,function(b,c){c.container=a}),this},e.prototype.remove=function(a){var b=this._scripts;return this._each(a,function(a){d(b,a)}),this},e.prototype.injectScript=function(b,c){var d=this._find(b);d&&this._scripts.splice(d.index+1,0,{container:d.script.container,$script:a("<script />").attr("type","text/mobify-script").html("("+c.toString()+")();")[0]})},e.prototype.replace=function(a,b,c){var d=this._find(a);if(d&&d.script){var e=d.script,f=[];3===arguments.length?f.push({pattern:b,replacement:c}):f=b;for(var g=0,h=f.length;h>g;g++){var i=f[g];e.$script.text(e.$script.text().replace(i.pattern,i.replacement))}}},e.prototype.addSearcher=function(a,b){this.searchers[a]=b},e.prototype._getSearchPatterns=function(a){return"string"==typeof a?a.indexOf(",")>=0?a.replace(/\s/,"").split(","):[a]:a},e.prototype._each=function(b,c){var d=this._scripts;for(var e in b)if(b.hasOwnProperty(e))for(var f=this._getSearchPatterns(b[e]),g=this.searchers[e],h=f.length;h--;)for(var i=d.length;i--;){var j=d[i];g(a(j.$script),f[h])&&c(i,j)}},e.prototype._find=function(b){var c,d,e,f,g=this._scripts,h=Object.keys(b);if(h.length>1)throw new Error("The searchType parameter should contain only one type, i.e. { src: 'script1' }");if(c=h[0],d=b[c],a.isArray(d)&&d.length>1)throw new Error("The searchType value should be a string or an array with only a single item, i.e. { src: 'script1' } or { contains: ['script1'] }");for(e=this.searchers[c],f=g.length;f--;){var i=g[f];if(e(a(i.$script),b[c]))return{script:i,index:f}}},e});